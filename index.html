<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok é£æ ¼è§†é¢‘ç«™</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: black; color: white; font-family: Arial, sans-serif; overflow: hidden; }
        .video-container { position: fixed; width: 100%; height: 100vh; display: flex; justify-content: center; align-items: center; }
        video { width: 100%; height: 100%; object-fit: cover; }
        .bottom-bar { position: fixed; bottom: 0; width: 100%; display: flex; justify-content: space-around; padding: 10px 0; background: rgba(0, 0, 0, 0.5); }
        .bottom-bar button { background: none; border: none; color: white; font-size: 18px; cursor: pointer; }
        .menu { position: fixed; top: 10px; right: 10px; cursor: pointer; }
        .menu div { width: 30px; height: 4px; background: white; margin: 5px 0; }
        .nav { display: none; position: fixed; top: 0; right: 0; width: 200px; height: 100vh; background: rgba(0, 0, 0, 0.8); padding: 20px; }
        .nav a { display: block; color: white; text-decoration: none; margin: 10px 0; }
        .video-info { position: absolute; bottom: 70px; left: 10px; }
        .video-info p { margin: 5px 0; }
    </style>
</head>
<body>
    <div class="video-container">
        <video id="video" autoplay loop></video>
    </div>
    <div class="video-info">
        <p id="username">@ç”¨æˆ·å</p>
        <p id="tags">#æ ‡ç­¾</p>
    </div>

    <script>
    let videos = [];
    let currentIndex = 0;

    async function loadVideos() {
        try {
            let response = await fetch('videos/videos.json');
            videos = await response.json();
            playRandomVideo();
        } catch (error) {
            console.error("åŠ è½½è§†é¢‘åˆ—è¡¨å¤±è´¥:", error);
        }
    }

    function playRandomVideo() {
        if (videos.length === 0) return;
        let randomIndex = Math.floor(Math.random() * videos.length);
        let data = videos[randomIndex];
        document.getElementById("video").src = data.videoUrl;
        document.getElementById("username").innerText = "@" + data.username;
        document.getElementById("tags").innerText = data.tags.join(" ");
    }

    // PC ç«¯é¼ æ ‡æ»šè½®äº‹ä»¶
    document.addEventListener("wheel", (event) => {
        if (event.deltaY > 0) {
            playRandomVideo();
        } else if (event.deltaY < 0) {
            playRandomVideo();
        }
    });

    // è§¦æ‘¸æ»‘åŠ¨äº‹ä»¶ï¼ˆç§»åŠ¨ç«¯ï¼‰
    let xDown = null;
    let yDown = null;

    document.addEventListener("touchstart", (evt) => {
        xDown = evt.touches[0].clientX;
        yDown = evt.touches[0].clientY;
    }, false);

    document.addEventListener("touchmove", (evt) => {
        if (!xDown || !yDown) return;
        let xUp = evt.touches[0].clientX;
        let yUp = evt.touches[0].clientY;
        let yDiff = yDown - yUp;

        if (Math.abs(yDiff) > 20) { // é¿å…è¯¯è§¦
            playRandomVideo();
        }

        xDown = null;
        yDown = null;
    }, false);

    function togglePlay() {
        let video = document.getElementById("video");
        video.paused ? video.play() : video.pause();
    }

    function toggleSound() {
        let video = document.getElementById("video");
        video.muted = !video.muted;
    }

    function toggleMenu() {
        let nav = document.getElementById("nav");
        nav.style.display = (nav.style.display === "block") ? "none" : "block";
    }

    function goHome() {
        window.location.href = "/";
    }

    function search() {
        alert("æœç´¢åŠŸèƒ½");
    }

    window.onload = loadVideos;
</script>

    
    <div class="bottom-bar">
        <button onclick="goHome()">ğŸ </button>
        <button onclick="search()">ğŸ”</button>
        <button onclick="togglePlay()">â¸ï¸</button>
        <button onclick="toggleSound()">ğŸ”Š</button>
    </div>
    <div class="menu" onclick="toggleMenu()">
        <div></div>
        <div></div>
        <div></div>
    </div>
    <div class="nav" id="nav">
        <a href="#">é¦–é¡µ</a>
        <a href="#">æ ‡ç­¾</a>
        <a href="#">è”ç³»æˆ‘ä»¬</a>
        <a href="#">æœåŠ¡æ¡æ¬¾</a>
    </div>
   
</body>
</html>
